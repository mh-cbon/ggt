package tomate

// file generated by
// github.com/mh-cbon/ggt
// do not edit

import (
	"bytes"
	"context"
	json "encoding/json"
	"errors"
	"fmt"
	"github.com/gorilla/mux"
	"io"
	"net/http"
	"net/url"
	"strings"
)

// RestClient is an http-clienter of Controller.
// Controller of tomatoes.
type RestClient struct {
	router *mux.Router
	client *http.Client
}

// NewRestClient constructs an http-clienter of Controller
func NewRestClient(router *mux.Router, client *http.Client) *RestClient {
	if client == nil {
		client = http.DefaultClient
	}
	ret := &RestClient{
		router: router,
		client: client,
	}
	return ret
}

// GetByID constructs a request to /read/{id:[0-9]+}
func (t RestClient) GetByID(routeID string) (jsonResBody *Tomate, err error) {
	sReqURL := "/read/{id:[0-9]+}"
	sReqURL = strings.Replace(sReqURL, "{id:[0-9]+}", fmt.Sprintf("%v", routeID), 1)
	reqURL, URLerr := url.ParseRequestURI(sReqURL)
	if URLerr != nil {
		return nil, errors.New("todo")
	}
	finalURL := reqURL.String()

	req, reqErr := http.NewRequest("GET", finalURL, nil)
	if reqErr != nil {
		return nil, errors.New("todo")
	}

	{
		res, resErr := t.client.Do(req)
		if resErr != nil {
			return nil, errors.New("todo")
		}

		decErr := json.NewDecoder(res.Body).Decode(jsonResBody)
		if decErr != nil {
			return nil, errors.New("todo")
		}

	}

	return jsonResBody, err
}

// Create constructs a request to /create
func (t RestClient) Create(postColor *string) (jsonResBody *Tomate, err error) {
	sReqURL := "/create"
	reqURL, URLerr := url.ParseRequestURI(sReqURL)
	if URLerr != nil {
		return nil, errors.New("todo")
	}
	form := url.Values{}
	form.Add("color", *postColor)
	finalURL := reqURL.String()

	req, reqErr := http.NewRequest("GET", finalURL, strings.NewReader(form.Encode()))
	if reqErr != nil {
		return nil, errors.New("todo")
	}

	{
		res, resErr := t.client.Do(req)
		if resErr != nil {
			return nil, errors.New("todo")
		}

		decErr := json.NewDecoder(res.Body).Decode(jsonResBody)
		if decErr != nil {
			return nil, errors.New("todo")
		}

	}

	return jsonResBody, err
}

// Update constructs a request to /write/{id:[0-9]+}
func (t RestClient) Update(routeID string, jsonReqBody *Tomate) (jsonResBody *Tomate, err error) {

	var body io.ReadWriter
	{
		var b bytes.Buffer
		body = &b
		encErr := json.NewEncoder(body).Encode(jsonReqBody)
		if encErr != nil {
			return nil, errors.New("todo")
		}

	}
	sReqURL := "/write/{id:[0-9]+}"
	sReqURL = strings.Replace(sReqURL, "{id:[0-9]+}", fmt.Sprintf("%v", routeID), 1)
	reqURL, URLerr := url.ParseRequestURI(sReqURL)
	if URLerr != nil {
		return nil, errors.New("todo")
	}
	finalURL := reqURL.String()

	req, reqErr := http.NewRequest("GET", finalURL, body)
	if reqErr != nil {
		return nil, errors.New("todo")
	}

	{
		res, resErr := t.client.Do(req)
		if resErr != nil {
			return nil, errors.New("todo")
		}

		decErr := json.NewDecoder(res.Body).Decode(jsonResBody)
		if decErr != nil {
			return nil, errors.New("todo")
		}

	}

	return jsonResBody, err
}

// Remove constructs a request to /remove/{id:[0-9]+}
func (t RestClient) Remove(ctx context.Context, routeID string) (jsonResBody bool, err error) {
	sReqURL := "/remove/{id:[0-9]+}"
	sReqURL = strings.Replace(sReqURL, "{id:[0-9]+}", fmt.Sprintf("%v", routeID), 1)
	reqURL, URLerr := url.ParseRequestURI(sReqURL)
	if URLerr != nil {
		return false, errors.New("todo")
	}
	finalURL := reqURL.String()

	req, reqErr := http.NewRequest("GET", finalURL, nil)
	if reqErr != nil {
		return false, errors.New("todo")
	}

	{
		res, resErr := t.client.Do(req)
		if resErr != nil {
			return false, errors.New("todo")
		}

		decErr := json.NewDecoder(res.Body).Decode(jsonResBody)
		if decErr != nil {
			return false, errors.New("todo")
		}

	}

	return jsonResBody, err
}
